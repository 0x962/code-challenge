<%= stylesheet_link_tag 'form', media: 'all' %>

<div class="py-5">

  <% if @company.errors.any? %>
  <div id="error_explanation">
    <span>The following errors prevented the company from being saved:</span>
    <ul class="text-danger px-20">
      <% @company.errors.full_messages.each do |msg| %>
        <li>- <%= msg %></li>
      <% end %>
    </ul>
  </div>
  <% end %>

  <%= form_for @company do |f| %>
    <div class="row my-lg-3">
      <div class="col-lg-3">
        <label><strong>Name</strong><br><small class="text-muted">The public DBA, or Common name of the organization</small></label>
      </div>
      <div class="col-lg offset-lg-1">
        <div class="form-group">
          <%= f.text_field :name, class: "form-control", placeholder: "Company Name", required: true %>
        </div>
      </div>
    </div>

    <div class="row my-lg-3">
      <div class="col-lg-3">
        <label><strong>Zip Code</strong><br><small class="text-muted">5 Digit US postal code</small></label>
      </div>
      <div class="col-lg offset-lg-1">
        <div class="form-group">
          <%= f.text_field :zip_code, class: "form-control", placeholder: "93003", required: true %>
        </div>
      </div>
    </div>

    <div class="row my-lg-3">
      <div class="col-lg-3">
        <label><strong>Description</strong><br><small class="text-muted">Rich text marketing description</small></label>
      </div>
      <div class="col-lg-8 offset-lg-1">
        <div class="form-group">
          <%= f.rich_text_area :description %>
        </div>
      </div>
    </div>


    <div class="row my-lg-3">
      <div class="col-lg-3">
        <label><strong>Phone</strong><br><small class="text-muted">Shown in marketing</small></label>
      </div>
      <div class="col-lg offset-lg-1">
        <div class="form-group">
          <%= f.text_field :phone, class: "form-control", placeholder: "555-555-5555"%>
        </div>
      </div>
    </div>

    <div class="row my-lg-3">
      <div class="col-lg-3">
        <label><strong>Email</strong><br><small class="text-muted">Shown in marketing</small></label>
      </div>
      <div class="col-lg offset-lg-1">
        <div class="form-group">
          <%= f.text_field :email, class: "form-control", placeholder: "hello@company.com"%>
        </div>
      </div>
    </div>

    <div class="row my-lg-3">
      <div class="col-lg-3">
        <label><strong>Services</strong><br><small class="text-muted">List the services offered by this company</small></label>
      </div>
      <div class="col-lg offset-lg-1">
          <div data-controller="services" class="form-group">
            <%= f.select :services,
              options_for_select(["Interior Painting", "Commercial Painting", "Exterior Painting"], @company.services),
              { include_blank: true, required: false },
              multiple: true,
              "data-target": "services.select2",
              class: "form-control" %>
          </div>
      </div>
    </div>

    <div class="row my-lg-3">
      <div class="col-lg-3">
        <label><strong>Business Owner</strong><br><small class="text-muted">Add more details by <a href="">editing</a> the business owner</small></label>
      </div>
      <div class="col-lg offset-lg-1">
        <%= f.fields_for :business_owner, @company.business_owner || BusinessOwner.new do |business_owner_form| %>
          <div class="form-group">
            <%= business_owner_form.label :first_name %>
            <%= business_owner_form.text_field :first_name, class: "form-control", placeholder: "John" %>
          </div>
          <div class="form-group">
            <%= business_owner_form.label :last_name %>
            <%= business_owner_form.text_field :last_name, class: "form-control", placeholder: "Doe" %>
          </div>
          <div class="form-group">
            <%= business_owner_form.label :email %>
            <%= business_owner_form.text_field :email, class: "form-control", placeholder: "Doe" %>
          </div>
        <% end %>
      </div>
    </div>

    <div class="row my-lg-3">
      <div class="col">
        <div class="form-group">
          <%= f.submit class: "btn btn-success"%>
        </div>
      </div>
    </div>
  <% end %>
</div>
